#:import utils kivy.utils
#:import ew kivy.uix.effectwidget
#:import CheckBox kivy.uix.checkbox
#:import CardTransition kivy.uix.screenmanager.CardTransition

<Button>
    font_size: 32
    font_name: "Fredoka"
    bold: False
    background_normal: ""
    background_color: (0, 0, 0, 0)
    on_release: 
        app.root.transition = CardTransition()
<QuitButton@Button>
    background_color: (0, 0, 0, 0)
    canvas.before:
        Color:
            rgba:utils.get_color_from_hex('#141414')
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [10]
<DonateButton@Button>
    background_color: (0, 0, 0, 0)
    canvas.before:
        Color:
            rgba:utils.get_color_from_hex('#94B586')
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [10]
<NextPlayerButton@Button>
    background_color: (0, 0, 0, 0)
    canvas.before:
        Color:
            rgba:utils.get_color_from_hex('#141414')
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [10]
<RebuildButton@Button>
    background_color: (0, 0, 0, 0)
    canvas.before:
        Color:
            rgba:utils.get_color_from_hex('#141414')
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [10]
<Label>
    font_size: 28
    font_name: "Fredoka"
    background_normal: ""
    color: (0, 0, 0, 1)
    bold: False


WindowManager:
    StartDisplay:
    MainMenu:
    SettingsMenu:
    Credits:
    RedBlack:
    HighLow:
    OddEven:
    InOut:
    Suits:
    NextPlayer:
    NoMoreCards:
<StartDisplay>
    name: "startdisplay"
    orientation: "vertical"
    Image:
        id: gif
        source: 'Images/logoAnimation.zip'
        pos: self.pos
        size_hint: None, None
        size: root.size
        allow_stretch: True
        keep_ratio: True
        anim_delay: -1
        anim_loop: 1
<MainMenu>
    name: "mainmenuwindow"
    on_pre_enter: root.update()
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'Images/backgroundTwo.png'
    BoxLayout:
        orientation: "vertical"
        Image: 
            id: cardimage
            source: "Images/redblacklogocolored.png"
            allow_stretch: True
            keep_ratio: True
            size_hint: (1, 1.3)
        BoxLayout:
            orientation: "vertical"
            spacing: 10
            padding: (20, 20)
            Button:
                id: startgame
                text: "Start Game"
                font_size: (self.width/20 + self.height/10)
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                bold: False
                on_press: root.start()
            Button:
                id: settings
                text: "Settings"
                font_size: (self.width/20 + self.height/10)
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                bold: False
                on_press: root.settings()
            Button:
                id: credits
                text: "Credits"
                font_size: (self.width/20 + self.height/10)
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                bold: False
                on_press: root.credits()
            QuitButton:
                id: exit
                text: "Exit?"
                font_size: (self.width/20 + self.height/10)
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                bold: False
                color: utils.get_color_from_hex('#F2F2F2')
                on_press: root.exit()
<SettingsMenu>
    name: "settingswindow"
    on_pre_enter: root.update()
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'Images/backgroundTwo.png'
    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height
        spacing: 30
        padding: (30, 30)
        Label:
            text: "Game Settings:"
        GridLayout:
            cols: 2
            rows: 5
            padding: (0, 0, -30, 0)
            Label:
                id: rbtext
                text: "Red or Black"
                font_size: 18
                text_size: self.size
                halign: "left"
                valign: "middle"
            Switch:
                id: rb_check
                active: True
                on_active: root.update()
            Label:
                id: hltext
                text: "Higher or Lower"
                font_size: 18
                text_size: self.size
                halign: "left"
                valign: "middle"
            Switch:
                id: hl_check
                active: True
                on_active: root.update()
            Label:
                id: oetext
                text: "Odd or Even"
                font_size: 18
                text_size: self.size
                halign: "left"
                valign: "middle"
            Switch:
                id: oe_check
                active: True
                on_active: root.update()
            Label:
                id: iotext
                text: "In or Out"
                font_size: 18
                text_size: self.size
                halign: "left"
                valign: "middle"
            Switch:
                id: io_check
                active: False
                on_active: root.update()
            Label:
                id: sutext
                text: "Suits"
                font_size: 18
                text_size: self.size
                halign: "left"
                valign: "middle"
            Switch:
                id: su_check
                active: False
                on_active: root.update()
        QuitButton:
            text: "Return"
            on_press: root.back()
            size_hint: (1, 0.2)
            color: utils.get_color_from_hex('#F2F2F2')
<Credits>
    name: "creditswindow"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'Images/backgroundTwo.png'
    BoxLayout:
        orientation:"vertical"
        size: root.width, root.height
        spacing: 10
        padding: (10, 10)
        Image:
            id: creditsimage
            source: "Images/OTPPLogo.png"
            size_hint_x: 1
            size_hint_y: root.height*0.4
            allow_stretch: True
            keep_ratio: True
        Label:
            id: creditstext
            font_size: 16
            size_hint_x: 1
            size_hint_y: root.height*0.4
            text: "Born as a result of lockdown boredom, OTPP is the creative endevour of Michael Matkovich.\nThis is only the beginning for OTPP, with many more games to come. Any and all donations to help us achieve our goals are most welcome!\nDrink Responsibly."
            text_size: self.size
            halign: 'center'
            valign: 'middle'
            bold: False
        BoxLayout:
            orientation: "vertical"
            spacing: 10
            size_hint_x: 1
            size_hint_y: root.height*0.2
            DonateButton:
                id: donatebutton
                text: "Donate"
                on_press: root.donate()
                size_hint: (1, 0.2)
                color: utils.get_color_from_hex('#F2F2F2')     
            QuitButton:
                id: quitbutton
                text: "Return"
                on_press: root.back()
                size_hint: (1, 0.2)
                color: utils.get_color_from_hex('#F2F2F2')

<RedBlack>
    name: "redblackwindow"
    on_pre_enter: root.update(0)
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'Images/backgroundTwo.png'
    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height
        spacing: 10
        Label:
            text: "Waiting..."
            id: waiting
            size_hint_x: 1
            size_hint_y: root.height*0.129
        Image: 
            id: cardimage
            source: "Images/card_back.png"
            size_hint_x: 1
            size_hint_y: root.height*0.5807
            allow_stretch: True
            keep_ratio: True
        BoxLayout:
            orientation: "horizontal"
            size_hint_x: 1
            size_hint_y: root.height*0.1613
            spacing: 10
            padding: 10
            Button:
                text: "RED"
                id: red
                on_press: root.pressed(1)
                color:utils.get_color_from_hex('#141414')
            Button:
                text: "BLACK"
                id: black
                on_press: root.pressed(2)
                color: utils.get_color_from_hex('#141414') 
        BoxLayout:
            orientation: "horizontal"
            size_hint_x: 1
            size_hint_y: root.height*0.129
            padding: 10
            Label:
                id: drinks
                text: ""
                text_size: self.size
                halign: 'left'
                valign: 'middle' 
            QuitButton:
                text: "Quit?"
                font_size: 14
                text_size: self.size
                halign: 'center'
                valign:'middle'
                bold: True
                size_hint: (0.35, 0.6)
                pos_hint: {'right':1, 'center_y':0.5}
                color: utils.get_color_from_hex('#F2F2F2')
                on_press: root.exit()
<HighLow>
    name: "highlowwindow"
    on_pre_enter: root.update(0)
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'Images/backgroundTwo.png'
    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height
        spacing: 10
        Label:
            text: "Waiting..."
            id: waiting
            size_hint_x: 1
            size_hint_y: root.height*0.129
        Image: 
            id: cardimage
            source: "Images/card_back.png"
            size_hint_x: 1
            size_hint_y: root.height*0.5807
            allow_stretch: True
            keep_ratio: True
        BoxLayout:
            orientation: "horizontal"
            size_hint_x: 1
            size_hint_y: root.height*0.1613
            spacing: 10
            padding: 10
            Button:
                text: "HIGHER"
                id: higher
                on_press: root.pressed(1)
                color:utils.get_color_from_hex('#141414')
            Button:
                text: "LOWER"
                id: lower
                on_press: root.pressed(2)
                color:utils.get_color_from_hex('#141414') 
        BoxLayout:
            orientation: "horizontal"
            size_hint_x: 1
            size_hint_y: root.height*0.129
            padding: 10
            Label:
                id: drinks
                text: ""
                text_size: self.size
                halign: 'left'
                valign: 'middle' 
            QuitButton:
                text: "Quit?"
                font_size: 14
                text_size: self.size
                halign: 'center'
                valign:'middle'
                bold: True
                size_hint: (0.35, 0.6)
                pos_hint: {'right':1, 'center_y':0.5}
                color: utils.get_color_from_hex('#F2F2F2')
                on_press: root.exit()

<OddEven>
    name: "oddevenwindow"
    on_pre_enter: root.update(0)
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'Images/backgroundTwo.png'
    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height
        spacing: 10
        Label:
            text: "Waiting..."
            id: waiting
            size_hint_x: 1
            size_hint_y: root.height*0.129
        Image: 
            id: cardimage
            source: "Images/card_back.png"
            size_hint_x: 1
            size_hint_y: root.height*0.5807
            allow_stretch: True
            keep_ratio: True
        BoxLayout:
            orientation: "horizontal"
            size_hint_x: 1
            size_hint_y: root.height*0.1613
            spacing: 10
            padding: 10
            Button:
                text: "ODD"
                id: odd
                on_press: root.pressed(1)
                color:utils.get_color_from_hex('#141414')
            Button:
                text: "EVEN"
                id: even
                on_press: root.pressed(2)
                color:utils.get_color_from_hex('#141414')
        BoxLayout:
            orientation: "horizontal"
            size_hint_x: 1
            size_hint_y: root.height*0.129
            padding: 10
            Label:
                id: drinks
                text: ""
                text_size: self.size
                halign: 'left'
                valign: 'middle' 
            QuitButton:
                text: "Quit?"
                font_size: 14
                text_size: self.size
                halign: 'center'
                valign:'middle'
                bold: True
                size_hint: (0.35, 0.6)
                pos_hint: {'right':1, 'center_y':0.5}
                color: utils.get_color_from_hex('#F2F2F2')
                on_press: root.exit()

<InOut>
    name: "inoutwindow"
    on_pre_enter: root.update(0)
    on_leave: root.leave(0)
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'Images/backgroundTwo.png'
    BoxLayout:
        id:layoutone
        orientation: "vertical"
        size: root.width, root.height
        spacing: 10
        Label:
            text: "Waiting..."
            id: waiting
            size_hint_x: 1
            size_hint_y: root.height*0.129
        BoxLayout:
            id: layouttwo
            orientation: "horizontal"
            size_hint_x: 1
            size_hint_y: root.height*0.5807
            spacing: 10
            Image: 
                id: cardimageone
                source: "Images/card_back.png"
                allow_stretch: True
                keep_ratio: True
            Image: 
                id: cardimagetwo
                source: "Images/card_back.png"
                allow_stretch: True
                keep_ratio: True
        BoxLayout:
            orientation: "horizontal"
            size_hint_x: 1
            size_hint_y: root.height*0.1613
            spacing: 10
            padding: 10
            Button:
                text: "IN"
                id: inn
                on_press: root.pressed(1)
                color:utils.get_color_from_hex('#141414')
            Button:
                text: "OUT"
                id: out
                on_press: root.pressed(2)
                color:utils.get_color_from_hex('#141414')
        BoxLayout:
            orientation: "horizontal"
            size_hint_x: 1
            size_hint_y: root.height*0.129
            padding: 10
            Label:
                id: drinks
                text: ""
                text_size: self.size
                halign: 'left'
                valign: 'middle' 
            QuitButton:
                text: "Quit?"
                font_size: 14
                text_size: self.size
                halign: 'center'
                valign:'middle'
                bold: True
                size_hint: (0.35, 0.6)
                pos_hint: {'right':1, 'center_y':0.5}
                color: utils.get_color_from_hex('#F2F2F2')
                on_press: root.exit()
<Suits>
    name: "suitswindow"
    on_pre_enter: root.update(0)
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'Images/backgroundTwo.png'
    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height
        spacing: 10
        Label:
            text: "Waiting..."
            id: waiting
            size_hint_x: 1
            size_hint_y: root.height*0.129
        Image: 
            id: cardimage
            source: "Images/card_back.png"
            size_hint_x: 1
            size_hint_y: root.height*0.5807
            allow_stretch: True
            keep_ratio: True
        GridLayout:
            cols: 2
            size_hint_x: 1
            size_hint_y: root.height*0.1613
            spacing: 10
            padding: 10
            Button:
                text: "DIAMOND"
                id: diamonds
                on_press: root.pressed(3)
                color:utils.get_color_from_hex('#141414')
            Button:
                text: "SPADE"
                id: spades
                on_press: root.pressed(1)
                color:utils.get_color_from_hex('#141414')
            Button:
                text: "HEART"
                id: hearts
                on_press: root.pressed(4)
                color:utils.get_color_from_hex('#141414')
            Button:
                text: "CLUB"
                id: clubs
                on_press: root.pressed(2)
                color:utils.get_color_from_hex('#141414')
        BoxLayout:
            orientation: "horizontal"
            size_hint_x: 1
            size_hint_y: root.height*0.129
            padding: 10
            Label:
                id: drinks
                text: ""
                text_size: self.size
                halign: 'left'
                valign: 'middle' 
            QuitButton:
                text: "Quit?"
                font_size: 14
                text_size: self.size
                halign: 'center'
                valign:'middle'
                bold: True
                size_hint: (0.35, 0.6)
                pos_hint: {'right':1, 'center_y':0.5}
                color: utils.get_color_from_hex('#F2F2F2')
                on_press: root.exit()
<NextPlayer>
    name: "nextplayerwindow"
    on_pre_enter: root.update(0)
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'Images/backgroundTwo.png'
    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height
        spacing: 10
        GridLayout:
            cols: 1
            size_hint_x: 1
            size_hint_y: root.height*0.71
            padding: 10
            Label:
                id: drinkstally
                text: ""
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                bold: False
                size_hint_x: 1
                size_hint_y: root.height*0.29
        GridLayout:
            cols: 1
            size_hint_x: 1
            size_hint_y: root.height*0.29
            padding: (root.width*0.2667, root.height*0.0968)
            NextPlayerButton:
                id: nextplayer
                text: f"Next \nPlayer!"
                font_size: 18
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                bold: False
                color:utils.get_color_from_hex('#F2F2F2')
                on_press: root.pressed()
<NoMoreCards>
    name: "nomorecards"
    on_pre_enter: root.update(0)
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'Images/backgroundTwo.png'
    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height
        padding: (10, 10)
        Label:
            id: finaldrinks
            text: ""
            text_size: self.size
            halign: 'center'
            valign: 'middle'
            bold: False
            size_hint_x: 1
            size_hint_y: root.height*0.8
        BoxLayout:
            orientation: "vertical"
            padding: (10, 10)
            spacing: 10
            size_hint_x: 1
            size_hint_y: root.height*0.2
            RebuildButton:
                id: rebuild
                text: "Reshuffle and Play Again?"
                font_size: (self.width/20 + self.height/10)
                text_size: self.size
                size_hint: (1, 0.2)
                halign: 'center'
                valign: 'middle'
                bold: False
                color: utils.get_color_from_hex('#F2F2F2')
                on_press: root.restart()
            QuitButton:
                text: "Quit?"
                font_size: (self.width/20 + self.height/10)
                text_size: self.size
                size_hint: (1, 0.2)
                halign: 'center'
                valign:'middle'
                bold: False
                color: utils.get_color_from_hex('#F2F2F2')
                on_press: root.exit()

